## ìš”ì•½

Moonwave êµ¬ë…ê´€ë¦¬ ì‹œìŠ¤í…œ v2.0ì˜ ê¸°ìˆ  ì•„í‚¤í…ì²˜ ë¬¸ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. React + TypeScript + Vite ê¸°ë°˜ì˜ ì •ì  SPAì™€ Supabase BaaSë¥¼ í™œìš©í•œ ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ë¡œ êµ¬ì„±ë˜ë©°, GitHub Pagesë¥¼ í†µí•œ ìë™ ë°°í¬ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

## ë¶„ì„

í”„ë¡œì íŠ¸ ë¬¸ì„œë“¤ì„ í†µí•´ íŒŒì•…í•œ í•µì‹¬ ê¸°ìˆ  ìš”ì†Œ:
- **í”„ë¡ íŠ¸ì—”ë“œ**: React + TypeScript + Vite + Tailwind CSS
- **ë°±ì—”ë“œ**: Supabase (PostgreSQL + Auth + Storage)
- **ë°°í¬**: GitHub Actions â†’ GitHub Pages
- **ë””ìì¸ ì‹œìŠ¤í…œ**: Utility-First CSS, Container Queries, Pretendard í°íŠ¸
- **ë°ì´í„° êµ¬ì¡°**: ìœ ì €ë³„ ì™„ì „ ë¶„ë¦¬ëœ êµ¬ë… ê´€ë¦¬ ì‹œìŠ¤í…œ

## ì‹¤í–‰

# ğŸ—ï¸ Moonwave ê¸°ìˆ  ì•„í‚¤í…ì²˜ v2.0

## âš ï¸ CRITICAL WARNINGS - READ FIRST

**âš ï¸ IMPORTANT: Always cd SMS_V.2.0 before running any commands**
**âš ï¸ DO NOT create src folder manually - Vite already created it**
**âš ï¸ GitHub Actions workflows must be in root .github folder**
**âš ï¸ All development work must happen inside SMS_V.2.0 directory**

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

### 1.1 ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph TB
    subgraph "Client Layer"
        A[React SPA<br/>TypeScript + Vite]
        B[Tailwind CSS<br/>+ Container Queries]
    end
    
    subgraph "Authentication"
        C[Supabase Auth<br/>Email + OAuth]
    end
    
    subgraph "Backend Services"
        D[Supabase Database<br/>PostgreSQL]
        E[Supabase Storage<br/>File Storage]
        F[Supabase Realtime<br/>WebSocket]
    end
    
    subgraph "Deployment"
        G[GitHub Actions<br/>CI/CD Pipeline]
        H[GitHub Pages<br/>Static Hosting]
    end
    
    A --> C
    A --> D
    A --> E
    A --> F
    A --> G
    G --> H
```

### 1.2 í•µì‹¬ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **Serverless First** | ì„œë²„ ê´€ë¦¬ ì—†ëŠ” BaaS í™œìš© |
| **Static Deployment** | ì •ì  ë°°í¬ë¡œ ë¹„ìš© íš¨ìœ¨ì„± ê·¹ëŒ€í™” |
| **Type Safety** | TypeScriptë¡œ ì „ì²´ íƒ€ì… ì•ˆì „ì„± ë³´ì¥ |
| **Utility-First CSS** | Tailwind CSSë¡œ ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ |
| **User Isolation** | ìœ ì €ë³„ ë°ì´í„° ì™„ì „ ë¶„ë¦¬ |

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 í”„ë¡ íŠ¸ì—”ë“œ ìŠ¤íƒ

```typescript
// SMS_V.2.0/package.json í•µì‹¬ ì˜ì¡´ì„±
{
  "dependencies": {
    "react": "^18.2.0",
    "@supabase/supabase-js": "^2.39.0",
    "clsx": "^2.1.0",
    "tailwind-merge": "^2.2.0",
    "@radix-ui/react-icons": "^1.3.0",
    "lucide-react": "^0.303.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@vitejs/plugin-react": "^4.2.1",
    "typescript": "^5.2.2",
    "vite": "^5.0.8",
    "tailwindcss": "^3.3.0",
    "@tailwindcss/container-queries": "^0.1.1"
  }
}
```

### 2.2 ë°±ì—”ë“œ ìŠ¤íƒ (Supabase)

| ì„œë¹„ìŠ¤ | ìš©ë„ | íŠ¹ì§• |
|--------|------|------|
| **PostgreSQL** | ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ | RLS ì •ì±…ìœ¼ë¡œ ë³´ì•ˆ ê°•í™” |
| **Auth** | ì¸ì¦ ì„œë¹„ìŠ¤ | Email/Password + Google OAuth |
| **Storage** | íŒŒì¼ ì €ì¥ì†Œ | ì„œë¹„ìŠ¤ ë¡œê³ /ì´ë¯¸ì§€ ì €ì¥ |
| **Realtime** | ì‹¤ì‹œê°„ ë™ê¸°í™” | êµ¬ë… ìƒíƒœ ë³€ê²½ ê°ì§€ |
| **Edge Functions** | ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ | ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì„ íƒ) |

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 3.1 ì „ì²´ êµ¬ì¡°

```
Repository Root/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ deploy.yml          # GitHub Actions (ROOT)
â”‚       â”œâ”€â”€ ci.yml              # Continuous Integration
â”‚       â””â”€â”€ security.yml        # Security scanning
â”œâ”€â”€ docs/                       # Documentation
â”œâ”€â”€ SMS_V.2.0/                  # Main project directory
â”‚   â”œâ”€â”€ src/                    # Source code (Vite created)
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/             # Basic UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/         # Layout components
â”‚   â”‚   â”‚   â””â”€â”€ features/       # Feature-specific components
â”‚   â”‚   â”œâ”€â”€ contexts/           # React contexts
â”‚   â”‚   â”œâ”€â”€ hooks/              # Custom hooks
â”‚   â”‚   â”œâ”€â”€ lib/                # Utility libraries
â”‚   â”‚   â”œâ”€â”€ pages/              # Page components
â”‚   â”‚   â”œâ”€â”€ types/              # TypeScript type definitions
â”‚   â”‚   â””â”€â”€ utils/              # Utility functions
â”‚   â”œâ”€â”€ public/                 # Static assets
â”‚   â”œâ”€â”€ package.json            # Dependencies
â”‚   â”œâ”€â”€ vite.config.ts          # Vite configuration
â”‚   â”œâ”€â”€ tailwind.config.js      # Tailwind configuration
â”‚   â”œâ”€â”€ tsconfig.json           # TypeScript configuration
â”‚   â””â”€â”€ .env.local              # Environment variables
â””â”€â”€ README.md                   # Project documentation
```

### 3.2 ì†ŒìŠ¤ ì½”ë“œ êµ¬ì¡°

```typescript
// SMS_V.2.0/src/ ë””ë ‰í† ë¦¬ êµ¬ì¡°
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                     # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ layout/                 # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ features/               # ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ subscription/
â”‚       â”œâ”€â”€ auth/
â”‚       â””â”€â”€ dashboard/
â”œâ”€â”€ contexts/                   # React Context
â”‚   â”œâ”€â”€ AuthContext.tsx
â”‚   â”œâ”€â”€ SubscriptionContext.tsx
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ hooks/                      # Custom Hooks
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useSubscriptions.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ lib/                        # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ constants.ts
â”œâ”€â”€ pages/                      # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ Login.tsx
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types/                      # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ subscription.ts
â”‚   â”œâ”€â”€ user.ts
â”‚   â””â”€â”€ index.ts
â””â”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    â”œâ”€â”€ date.ts
    â”œâ”€â”€ validation.ts
    â””â”€â”€ index.ts
```

---

## 4. ê°œë°œ í™˜ê²½ ì„¤ì •

### 4.1 í•„ìˆ˜ ë„êµ¬

| ë„êµ¬ | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **Node.js** | 18+ | JavaScript ëŸ°íƒ€ì„ |
| **npm** | 9+ | íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € |
| **Cursor** | ìµœì‹  | AI ê¸°ë°˜ IDE |
| **Git** | 2.30+ | ë²„ì „ ê´€ë¦¬ |

### 4.2 ê°œë°œ í™˜ê²½ ì´ˆê¸°í™”

```bash
# âš ï¸ IMPORTANT: Always start from repository root
cd /workspace

# Clone repository
git clone https://github.com/yourusername/moonwave-v2.git
cd moonwave-v2

# âš ï¸ IMPORTANT: Navigate to project directory
cd SMS_V.2.0

# Install dependencies (--legacy-peer-deps for Vite 7 compatibility)
npm install --legacy-peer-deps

# Start development server
npm run dev
```

### 4.3 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# SMS_V.2.0/.env.local
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key
VITE_APP_VERSION=2.0.0
VITE_APP_ENV=development
```

---

## 5. ë¹Œë“œ ë° ë°°í¬

### 5.1 ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

```bash
# âš ï¸ IMPORTANT: Make sure you're in SMS_V.2.0 directory
cd SMS_V.2.0

# Development build
npm run dev

# Production build
npm run build

# Preview production build
npm run preview
```

### 5.2 GitHub Actions ë°°í¬

```yaml
# .github/workflows/deploy.yml (Repository ROOT)
name: Deploy to GitHub Pages

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        cache-dependency-path: SMS_V.2.0/package-lock.json
    
    - name: Install dependencies
      working-directory: SMS_V.2.0
      run: npm ci --legacy-peer-deps
    
    - name: Build
      working-directory: SMS_V.2.0
      run: npm run build
      env:
        VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
        VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
    
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./SMS_V.2.0/dist
```

### 5.3 Vite ì„¤ì •

```typescript
// SMS_V.2.0/vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  base: '/moonwave-static/', // GitHub Pages base path
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          supabase: ['@supabase/supabase-js']
        }
      }
    }
  },
  server: {
    port: 5173,
    host: true
  }
})
```

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 6.1 Supabase í…Œì´ë¸” êµ¬ì¡°

```sql
-- Users table (managed by Supabase Auth)
-- auth.users (built-in)

-- Subscriptions table
CREATE TABLE subscriptions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  service_name VARCHAR(100) NOT NULL,
  service_url TEXT,
  monthly_fee DECIMAL(10,2) NOT NULL,
  billing_cycle VARCHAR(20) DEFAULT 'monthly',
  next_billing_date DATE NOT NULL,
  status VARCHAR(20) DEFAULT 'active',
  category VARCHAR(50),
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Row Level Security (RLS)
ALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own subscriptions" ON subscriptions
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own subscriptions" ON subscriptions
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own subscriptions" ON subscriptions
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own subscriptions" ON subscriptions
  FOR DELETE USING (auth.uid() = user_id);
```

### 6.2 TypeScript íƒ€ì… ì •ì˜

```typescript
// SMS_V.2.0/src/types/subscription.ts
export interface Subscription {
  id: string
  user_id: string
  service_name: string
  service_url?: string
  monthly_fee: number
  billing_cycle: 'monthly' | 'yearly' | 'quarterly'
  next_billing_date: string
  status: 'active' | 'cancelled' | 'paused'
  category?: string
  notes?: string
  created_at: string
  updated_at: string
}

export interface User {
  id: string
  email: string
  created_at: string
  updated_at: string
}
```

---

## 7. ë³´ì•ˆ ì•„í‚¤í…ì²˜

### 7.1 ì¸ì¦ ë° ê¶Œí•œ

```typescript
// SMS_V.2.0/src/lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true
  }
})
```

### 7.2 Row Level Security (RLS)

```sql
-- ëª¨ë“  í…Œì´ë¸”ì— RLS ì ìš©
ALTER TABLE subscriptions ENABLE ROW LEVEL SECURITY;

-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
CREATE POLICY "Users can only access their own data" ON subscriptions
  FOR ALL USING (auth.uid() = user_id);
```

---

## 8. ì„±ëŠ¥ ìµœì í™”

### 8.1 ì½”ë“œ ë¶„í• 

```typescript
// SMS_V.2.0/src/App.tsx
import { lazy, Suspense } from 'react'

// Lazy loading for pages
const Dashboard = lazy(() => import('@/pages/Dashboard'))
const SubscriptionList = lazy(() => import('@/pages/SubscriptionList'))

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Dashboard />
    </Suspense>
  )
}
```

### 8.2 ì´ë¯¸ì§€ ìµœì í™”

```typescript
// SMS_V.2.0/src/components/ui/Image.tsx
import { useState } from 'react'

interface ImageProps {
  src: string
  alt: string
  className?: string
}

export function Image({ src, alt, className }: ImageProps) {
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(false)

  return (
    <div className={`relative ${className}`}>
      {loading && (
        <div className="absolute inset-0 bg-gray-200 animate-pulse" />
      )}
      <img
        src={src}
        alt={alt}
        className={`w-full h-full object-cover ${
          loading ? 'opacity-0' : 'opacity-100'
        }`}
        onLoad={() => setLoading(false)}
        onError={() => setError(true)}
      />
    </div>
  )
}
```

---

## ğŸ”§ Common Mistakes and Solutions

### âŒ Common Mistakes

1. **Creating duplicate src folders**
   - âŒ Wrong: Creating another src folder inside SMS_V.2.0
   - âœ… Correct: Use existing SMS_V.2.0/src folder created by Vite

2. **Running commands in wrong directory**
   - âŒ Wrong: Running npm commands from repository root
   - âœ… Correct: Always `cd SMS_V.2.0` first

3. **GitHub Actions in wrong location**
   - âŒ Wrong: Placing workflows in SMS_V.2.0/.github/
   - âœ… Correct: Place in root .github/workflows/

4. **npm dependency conflicts**
   - âŒ Wrong: Using `npm install` without --legacy-peer-deps
   - âœ… Correct: Use `npm install --legacy-peer-deps`

5. **Incorrect file paths in imports**
   - âŒ Wrong: `import Button from '../components/Button'`
   - âœ… Correct: `import Button from '@/components/ui/Button'`

### âœ… Solutions

1. **Directory Structure Verification**
   ```bash
   # Always verify you're in the right directory
   pwd  # Should show: /workspace/SMS_V.2.0
   ls   # Should show: src/, package.json, vite.config.ts, etc.
   ```

2. **Path Alias Configuration**
   ```typescript
   // SMS_V.2.0/tsconfig.app.json
   {
     "compilerOptions": {
       "paths": {
         "@/*": ["./src/*"]
       }
     }
   }
   ```

3. **GitHub Actions Directory Structure**
   ```
   Repository Root/
   â”œâ”€â”€ .github/
   â”‚   â””â”€â”€ workflows/
   â”‚       â”œâ”€â”€ deploy.yml
   â”‚       â””â”€â”€ ci.yml
   â””â”€â”€ SMS_V.2.0/
       â”œâ”€â”€ src/
       â”œâ”€â”€ package.json
       â””â”€â”€ vite.config.ts
   ```

4. **Environment Variables**
   ```bash
   # SMS_V.2.0/.env.local (for development)
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_anon_key
   ```

5. **Build and Deploy Commands**
   ```bash
   # Development
   cd SMS_V.2.0
   npm run dev

   # Build
   cd SMS_V.2.0
   npm run build

   # Deploy (GitHub Actions handles this automatically)
   git add .
   git commit -m "feat: new feature"
   git push origin main
   ```

---

## ğŸ“‹ Verification Checklist

Before starting any development session:

- [ ] Verify you are in SMS_V.2.0 directory: `pwd`
- [ ] Check that src folder exists: `ls src/`
- [ ] Verify package.json exists: `ls package.json`
- [ ] Confirm GitHub Actions are in root .github folder
- [ ] Test npm install with --legacy-peer-deps
- [ ] Verify @ alias works in imports
- [ ] Check that vite.config.ts has correct base path

---

## ğŸš€ Quick Start Commands

```bash
# Clone repository
git clone https://github.com/yourusername/moonwave-v2.git
cd moonwave-v2

# Navigate to project directory
cd SMS_V.2.0

# Install dependencies
npm install --legacy-peer-deps

# Start development server
npm run dev

# Build for production
npm run build

# Deploy (automatic via GitHub Actions)
git add .
git commit -m "feat: new feature"
git push origin main
```
